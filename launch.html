<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SMART Launching...</title>
    <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script>
</head>
<body>
    <script>
        // 取得網址列參數
        const params = new URLSearchParams(window.location.search);
        const iss = params.get('iss');
        const pId = params.get('patientId');

        FHIR.oauth2.authorize({
            "clientId": "your-client-id-here", // ⚠️ 請更換為你在 Sandbox 註冊的 Client ID
            "scope": [
                "openid", "profile", "launch", "online_access",
                "patient/Patient.read",
                "patient/Observation.read",
                "patient/Condition.read",
                "patient/ServiceRequest.read" // 符合健保 PAS 規範之 Scopes
            ].join(" "),
            "redirectUri": "index.html",
            "iss": iss,
            "patientId": pId // 指定點選的 Jason ID
        });
    </script>
    <div style="text-align: center; margin-top: 100px; font-family: Arial, sans-serif;">
        <div style="font-size: 24px; color: #007bff;">正在連線衛福部 FHIR Server...</div>
        <p>正在根據 PAS 規範請求臨床資料存取權限</p>
    </div>
</body>
</html>